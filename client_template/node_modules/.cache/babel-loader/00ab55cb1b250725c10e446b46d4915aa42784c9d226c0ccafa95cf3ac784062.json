{"ast":null,"code":"var _jsxFileName = \"C:\\\\projet web avanc\\xE9\\\\Takeoff-Takeout\\\\client\\\\src\\\\pages\\\\deiveryTrackingPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\nimport 'leaflet-routing-machine';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AnimatedMarker({\n  start,\n  end,\n  interval\n}) {\n  _s();\n  const [position, setPosition] = useState(start);\n  const [route, setRoute] = useState([]);\n  const map = useMap();\n  const markerRef = useRef(null);\n  const routingControlRef = useRef(null);\n  useEffect(() => {\n    if (!map) return;\n    routingControlRef.current = L.Routing.control({\n      waypoints: [L.latLng(start), L.latLng(end)],\n      createMarker: () => null // We create a custom marker\n    }).addTo(map);\n    routingControlRef.current.on('routesfound', function (e) {\n      const routes = e.routes[0].coordinates;\n      setRoute(routes);\n    });\n    return () => {\n      try {\n        if (routingControlRef.current) {\n          routingControlRef.current.getPlan().eachLayer(layer => {\n            if (layer && map.hasLayer(layer)) {\n              map.removeLayer(layer);\n            }\n          });\n          map.removeControl(routingControlRef.current);\n          routingControlRef.current = null;\n        }\n      } catch (error) {\n        console.error('Error while cleaning up routing control:', error);\n      }\n    };\n  }, [start, end, map]);\n  useEffect(() => {\n    if (route.length === 0) return;\n    let index = 0;\n    const intervalId = setInterval(() => {\n      if (index >= route.length) {\n        clearInterval(intervalId);\n        alert('Le livreur est arrivé à destination!');\n      } else {\n        setPosition(route[index]);\n        index += 1;\n      }\n    }, interval);\n    return () => clearInterval(intervalId);\n  }, [route, interval]);\n  return /*#__PURE__*/_jsxDEV(Marker, {\n    position: position,\n    ref: markerRef,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: \"Delivery in progress\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(AnimatedMarker, \"pBFkHelAxOBhi4Ym/X6fryHIpBM=\", false, function () {\n  return [useMap];\n});\n_c = AnimatedMarker;\nfunction DeliveryTrackingPage() {\n  const start = [48.55445700, 7.68174900];\n  const end = [48.8566, 2.3522];\n\n  // Adjust the interval value to change the speed\n  const interval = 100; // Decrease for faster, increase for slower\n\n  let DefaultIcon = L.icon({\n    iconUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png\"\n  });\n  L.Marker.prototype.options.icon = DefaultIcon;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Delivery Tracking\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: start,\n      zoom: 13,\n      scrollWheelZoom: true // Enable scroll wheel zoom\n      ,\n      style: {\n        height: \"600px\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatedMarker, {\n        start: start,\n        end: end,\n        interval: interval\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: end,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Destination\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_c2 = DeliveryTrackingPage;\nexport default DeliveryTrackingPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"AnimatedMarker\");\n$RefreshReg$(_c2, \"DeliveryTrackingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","useMap","L","jsxDEV","_jsxDEV","AnimatedMarker","start","end","interval","_s","position","setPosition","route","setRoute","map","markerRef","routingControlRef","current","Routing","control","waypoints","latLng","createMarker","addTo","on","e","routes","coordinates","getPlan","eachLayer","layer","hasLayer","removeLayer","removeControl","error","console","length","index","intervalId","setInterval","clearInterval","alert","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","DeliveryTrackingPage","DefaultIcon","icon","iconUrl","prototype","options","center","zoom","scrollWheelZoom","style","height","width","attribution","url","_c2","$RefreshReg$"],"sources":["C:/projet web avancé/Takeoff-Takeout/client/src/pages/deiveryTrackingPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\r\nimport 'leaflet-routing-machine';\r\n\r\nfunction AnimatedMarker({ start, end, interval }) {\r\n  const [position, setPosition] = useState(start);\r\n  const [route, setRoute] = useState([]);\r\n  const map = useMap();\r\n  const markerRef = useRef(null);\r\n  const routingControlRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    routingControlRef.current = L.Routing.control({\r\n      waypoints: [\r\n        L.latLng(start),\r\n        L.latLng(end)\r\n      ],\r\n      createMarker: () => null, // We create a custom marker\r\n    }).addTo(map);\r\n\r\n    routingControlRef.current.on('routesfound', function (e) {\r\n      const routes = e.routes[0].coordinates;\r\n      setRoute(routes);\r\n    });\r\n\r\n    return () => {\r\n      try {\r\n        if (routingControlRef.current) {\r\n          routingControlRef.current.getPlan().eachLayer(layer => {\r\n            if (layer && map.hasLayer(layer)) {\r\n              map.removeLayer(layer);\r\n            }\r\n          });\r\n          map.removeControl(routingControlRef.current);\r\n          routingControlRef.current = null;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error while cleaning up routing control:', error);\r\n      }\r\n    };\r\n  }, [start, end, map]);\r\n\r\n  useEffect(() => {\r\n    if (route.length === 0) return;\r\n\r\n    let index = 0;\r\n    const intervalId = setInterval(() => {\r\n      if (index >= route.length) {\r\n        clearInterval(intervalId);\r\n        alert('Le livreur est arrivé à destination!');\r\n      } else {\r\n        setPosition(route[index]);\r\n        index += 1;\r\n      }\r\n    }, interval);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [route, interval]);\r\n\r\n  return (\r\n    <Marker position={position} ref={markerRef}>\r\n      <Popup>Delivery in progress</Popup>\r\n    </Marker>\r\n  );\r\n}\r\n\r\nfunction DeliveryTrackingPage() {\r\n  const start = [48.55445700, 7.68174900];\r\n  const end = [48.8566, 2.3522];\r\n\r\n  // Adjust the interval value to change the speed\r\n  const interval = 100; // Decrease for faster, increase for slower\r\n\r\n  let DefaultIcon = L.icon({\r\n    iconUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png\",\r\n  });\r\n  L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Delivery Tracking</h1>\r\n      <MapContainer\r\n        center={start}\r\n        zoom={13}\r\n        scrollWheelZoom={true} // Enable scroll wheel zoom\r\n        style={{ height: \"600px\", width: \"100%\" }}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <AnimatedMarker start={start} end={end} interval={interval} />\r\n        <Marker position={end}>\r\n          <Popup>Destination</Popup>\r\n        </Marker>\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeliveryTrackingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}