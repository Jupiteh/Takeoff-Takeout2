{"ast":null,"code":"var _jsxFileName = \"C:\\\\projet web avanc\\xE9\\\\Takeoff-Takeout\\\\client\\\\src\\\\pages\\\\deiveryTrackingPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\nimport 'leaflet-routing-machine';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AnimatedMarker({\n  start,\n  end,\n  interval\n}) {\n  _s();\n  const [position, setPosition] = useState(start);\n  const [route, setRoute] = useState([]);\n  const map = useMap();\n  const markerRef = useRef(null);\n  const routingControlRef = useRef(null);\n  useEffect(() => {\n    if (!map) return;\n    routingControlRef.current = L.Routing.control({\n      waypoints: [L.latLng(start), L.latLng(end)],\n      createMarker: () => null // We create a custom marker\n    }).addTo(map);\n    routingControlRef.current.on('routesfound', function (e) {\n      const routes = e.routes[0].coordinates;\n      setRoute(routes);\n    });\n    return () => {\n      if (routingControlRef.current) {\n        map.removeControl(routingControlRef.current);\n        routingControlRef.current = null;\n      }\n    };\n  }, [start, end, map]);\n  useEffect(() => {\n    if (route.length === 0) return;\n    let index = 0;\n    const intervalId = setInterval(() => {\n      if (index >= route.length) {\n        clearInterval(intervalId);\n        alert('Le livreur est arrivé à destination!');\n      } else {\n        setPosition(route[index]);\n        index += 1;\n      }\n    }, interval);\n    return () => clearInterval(intervalId);\n  }, [route, interval]);\n  return /*#__PURE__*/_jsxDEV(Marker, {\n    position: position,\n    ref: markerRef,\n    children: /*#__PURE__*/_jsxDEV(Popup, {\n      children: \"Delivery in progress\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(AnimatedMarker, \"pBFkHelAxOBhi4Ym/X6fryHIpBM=\", false, function () {\n  return [useMap];\n});\n_c = AnimatedMarker;\nfunction DeliveryTrackingPage() {\n  const start = [48.55445700, 7.68174900];\n  const end = [48.559606, 7.690682];\n\n  // Adjust the interval value to change the speed\n  const interval = 100; // Decrease for faster, increase for slower\n\n  let DefaultIcon = L.icon({\n    iconUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png\"\n  });\n  L.Marker.prototype.options.icon = DefaultIcon;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Delivery Tracking\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: start,\n      zoom: 13,\n      scrollWheelZoom: true // Enable scroll wheel zoom\n      ,\n      style: {\n        height: \"600px\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatedMarker, {\n        start: start,\n        end: end,\n        interval: interval\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: end,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Destination\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_c2 = DeliveryTrackingPage;\nexport default DeliveryTrackingPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"AnimatedMarker\");\n$RefreshReg$(_c2, \"DeliveryTrackingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MapContainer","TileLayer","Marker","Popup","useMap","L","jsxDEV","_jsxDEV","AnimatedMarker","start","end","interval","_s","position","setPosition","route","setRoute","map","markerRef","routingControlRef","current","Routing","control","waypoints","latLng","createMarker","addTo","on","e","routes","coordinates","removeControl","length","index","intervalId","setInterval","clearInterval","alert","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","DeliveryTrackingPage","DefaultIcon","icon","iconUrl","prototype","options","center","zoom","scrollWheelZoom","style","height","width","attribution","url","_c2","$RefreshReg$"],"sources":["C:/projet web avancé/Takeoff-Takeout/client/src/pages/deiveryTrackingPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'leaflet-routing-machine/dist/leaflet-routing-machine.css';\r\nimport 'leaflet-routing-machine';\r\n\r\nfunction AnimatedMarker({ start, end, interval }) {\r\n  const [position, setPosition] = useState(start);\r\n  const [route, setRoute] = useState([]);\r\n  const map = useMap();\r\n  const markerRef = useRef(null);\r\n  const routingControlRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!map) return;\r\n\r\n    routingControlRef.current = L.Routing.control({\r\n      waypoints: [\r\n        L.latLng(start),\r\n        L.latLng(end)\r\n      ],\r\n      createMarker: () => null, // We create a custom marker\r\n    }).addTo(map);\r\n\r\n    routingControlRef.current.on('routesfound', function (e) {\r\n      const routes = e.routes[0].coordinates;\r\n      setRoute(routes);\r\n    });\r\n\r\n    return () => {\r\n      if (routingControlRef.current) {\r\n        map.removeControl(routingControlRef.current);\r\n        routingControlRef.current = null;\r\n      }\r\n    };\r\n  }, [start, end, map]);\r\n\r\n  useEffect(() => {\r\n    if (route.length === 0) return;\r\n\r\n    let index = 0;\r\n    const intervalId = setInterval(() => {\r\n      if (index >= route.length) {\r\n        clearInterval(intervalId);\r\n        alert('Le livreur est arrivé à destination!');\r\n      } else {\r\n        setPosition(route[index]);\r\n        index += 1;\r\n      }\r\n    }, interval);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [route, interval]);\r\n\r\n  return (\r\n    <Marker position={position} ref={markerRef}>\r\n      <Popup>Delivery in progress</Popup>\r\n    </Marker>\r\n  );\r\n}\r\n\r\nfunction DeliveryTrackingPage() {\r\n  const start = [48.55445700, 7.68174900];\r\n  const end = [48.559606, 7.690682];\r\n\r\n  // Adjust the interval value to change the speed\r\n  const interval = 100; // Decrease for faster, increase for slower\r\n\r\n  let DefaultIcon = L.icon({\r\n    iconUrl: \"https://unpkg.com/leaflet@1.6/dist/images/marker-icon.png\",\r\n  });\r\n  L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Delivery Tracking</h1>\r\n      <MapContainer\r\n        center={start}\r\n        zoom={13}\r\n        scrollWheelZoom={true} // Enable scroll wheel zoom\r\n        style={{ height: \"600px\", width: \"100%\" }}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <AnimatedMarker start={start} end={end} interval={interval} />\r\n        <Marker position={end}>\r\n          <Popup>Destination</Popup>\r\n        </Marker>\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeliveryTrackingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}